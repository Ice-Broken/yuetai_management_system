{"remainingRequest":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\student\\student-score.vue?vue&type=style&index=0&id=d29a944a&scoped=true&lang=scss","dependencies":[{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\student\\student-score.vue","mtime":1686031785000},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1688620975306},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1688620975546},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1688620975454},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1688620980165},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688620971327},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1688620975546}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ib3gtY2FyZCB7CiAgd2lkdGg6IDUwMHB4ICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiA0MDBweCAhaW1wb3J0YW50OwogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDIwMHB4OwogIGxlZnQ6IGNhbGMoKDEwMHZ3IC0gNTAwcHgpIC8gMik7CiAgei1pbmRleDogOTk5OTk7Cn0KLmNsb3NlIHsKICBmbG9hdDogcmlnaHQ7Cn0KLmFsZXJ0IHsKICB3aWR0aDogMTAwdnc7CiAgaGVpZ2h0OiAxMDB2aDsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiAwcHg7CiAgbGVmdDogMHB4OwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4zKTsKICB6LWluZGV4OiA5OTk5Owp9Cg=="},{"version":3,"sources":["C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\student\\student-score.vue"],"names":[],"mappings":";AAsHA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;EAC/B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACd;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACR,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACf","file":"C:/Users/Rick/Desktop/yuetai_management_system/frontend/src/views/student/student-score.vue","sourceRoot":"","sourcesContent":["<template>\n  <div v-if=\"isWatch == 'true'\">\n    <el-table :data=\"data\" style=\"width: 100%\">\n      <el-table-column prop=\"key\" label=\"说明\" width=\"200\"> </el-table-column>\n      <el-table-column prop=\"value\" label=\"结果\" width=\"200\"> </el-table-column>\n    </el-table>\n    <el-button type=\"primary\" icon=\"el-icon-download\" @click=\"log\"\n      >打印成绩</el-button\n    >\n    <el-card class=\"box-card\" v-if=\"isShow\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>下载成绩</span>\n          <el-button class=\"button close\" type=\"text\" @click=\"isShow = false\"\n            >关闭</el-button\n          >\n        </div>\n      </template>\n      <div class=\"text item\">\n        <a :href=\"store.state.excel + url + '.xlsx'\">点击下载成绩</a>\n      </div>\n    </el-card>\n    <div class=\"alert\" v-if=\"isShow\"></div>\n  </div>\n  <h1 v-else>目前禁止察看成绩</h1>\n</template>\n<script setup>\nimport { ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport api from \"@/modules/api\";\nimport teacherPrint from \"@/modules/teacher/teacher-print\";\n\nlet store = useStore();\nlet url = ref(\"\");\nlet tableData = ref([]);\nlet all = ref(0);\nlet gpa = ref(0);\nlet num = ref(0);\n\nlet data = ref([]);\napi(`select * from achievement where stucode='${localStorage.student}'`).then(\n  (res) => {\n    tableData.value = res.res;\n    let value = Object.values(res.res[0]).slice(2, 8);\n    value.forEach((item, index) => {\n      if (+item) {\n        all.value += +item;\n        num.value++;\n      }\n      if (+item > 90) {\n        gpa.value += 4;\n      } else if (+item > 80) {\n        gpa.value += 3;\n      } else if (+item > 70) {\n        gpa.value += 2;\n      } else if (+item > 60) {\n        gpa.value += 1;\n      }\n    });\n    let key = [\n      \"学号\",\n      \"姓名\",\n      \"VUE\",\n      \"Node.js\",\n      \"马克思\",\n      \"创新\",\n      \"MysSQL\",\n      \"高等数学\",\n      \"平局绩点\",\n      \"平均分\",\n      \"总分\",\n    ];\n    let values = Object.values(tableData.value[0]).slice(0, 8);\n    values.push((gpa.value / num.value).toFixed(2));\n    values.push((all.value / num.value).toFixed(2));\n    values.push(all.value);\n    key.forEach((item, index) => {\n      data.value.push({\n        key: item,\n        value: values[index],\n      });\n    });\n  }\n);\n\nlet isShow = ref(false);\nfunction log() {\n  let data = [];\n  data.push([\n    \"姓名\",\n    \"学号\",\n    \"VUE\",\n    \"Node.js\",\n    \"马克思主义哲学\",\n    \"创新与实践\",\n    \"MySQL\",\n    \"高等数学\",\n    \"总分\",\n  ]);\n  let newData = Object.values(tableData.value[0]);\n  newData[8] = all.value;\n  data.push(newData);\n  let print = {\n    name: localStorage.student + \"同学的成绩单\",\n    data: data,\n  };\n  teacherPrint({ data: print }).then((res) => {\n    isShow.value = true;\n    url.value = print.name;\n  });\n}\n\nlet isWatch = ref(\"\");\napi(`select * from isshow`).then((res) => {\n  isWatch.value = res.res[0].watch;\n});\n</script>\n<style scoped lang='scss'>\n.box-card {\n  width: 500px !important;\n  height: 400px !important;\n  position: fixed;\n  top: 200px;\n  left: calc((100vw - 500px) / 2);\n  z-index: 99999;\n}\n.close {\n  float: right;\n}\n.alert {\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  background-color: rgba(0, 0, 0, 0.3);\n  z-index: 9999;\n}\n</style>"]}]}