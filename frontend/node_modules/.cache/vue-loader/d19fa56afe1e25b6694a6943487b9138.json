{"remainingRequest":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\chamber\\b_buyer-total.vue?vue&type=style&index=0&id=2ccbe9f2&scoped=true&lang=scss","dependencies":[{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\chamber\\b_buyer-total.vue","mtime":1692171980312},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1688620975306},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1688620975546},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1688620975454},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1688620980165},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688620971327},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1688620975546}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZWwtc2VsZWN0IHsNCiAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAzMHB4Ow0KfQ0KDQouZm9vdGVyIHsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgbWFyZ2luLXRvcDogNDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KfQ0KDQouY29tcGFueV9uYW1lIHsNCiAgICB3aWR0aDogMjAwcHg7DQogICAgbWFyZ2luLWxlZnQ6IDIwcHg7DQp9DQoNCi5zZWFyY2gtYnRuIHsNCiAgICBtYXJnaW4tbGVmdDogMTBweDsNCn0="},{"version":3,"sources":["C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\chamber\\b_buyer-total.vue"],"names":[],"mappings":";AA4HA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACvB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrB","file":"C:/Users/Rick/Desktop/yuetai_management_system/frontend/src/views/chamber/b_buyer-total.vue","sourceRoot":"","sourcesContent":["<template>\r\n    <el-select v-model=\"stuSource\" placeholder=\"是否激活\" @change=\"selectSex\">\r\n        <el-option v-for=\"item in setSource\" :key=\"item.label\" :label=\"item.label\" :value=\"item.label\">\r\n        </el-option>\r\n    </el-select>\r\n    <el-input placeholder=\"请输入大采购商名称\" v-model=\"compName\" class=\"company_name\" clearable v-if=\"isAdmin\">\r\n    </el-input>\r\n    <el-button icon=\"el-icon-search\" @click=\"search\" class=\"search-btn\" circle v-if=\"isAdmin\"></el-button>\r\n    &nbsp;&nbsp;&nbsp;&nbsp; \r\n    <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"upload\"> 新增大采购商 </el-button>\r\n    <el-table :data=\"tableData\" style=\"width:100%\" :default-sort=\"{ prop: 'time', order: 'descending' }\">\r\n        <el-table-column prop=\"bbuyer_name_ch\" label=\"采购商中文名称\" width=\"160\" text-align=\"center\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"bbuyer_name_en\" label=\"采购商英文名称\" width=\"160\" text-align=\"center\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"contact_name\" label=\"联系人\" width=\"130\" text-align=\"center\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"tel\" label=\"联系人电话\" width=\"130\" text-align=\"center\" show-overflow-tooltip> </el-table-column>\r\n        <el-table-column prop=\"email\" label=\"联系人电邮\" width=\"130\" text-align=\"center\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"time\" label=\"最后联系时间\" width=\"150\" text-align=\"center\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"remark\" label=\"跟进情况\" width=\"150\" text-align=\"center\">\r\n            <template v-slot=\"scope\">\r\n                <el-tooltip class=\"item\" effect=\"dark\" :content=\"scope.row.remark\" placement=\"top\">\r\n                    <div>触碰察看内容</div>\r\n                </el-tooltip>\r\n            </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"修改情况\" v-if=\"isTeacher != 'teacher'\">\r\n            <template v-slot=\"scope\">\r\n                <el-button type=\"info\" icon=\"el-icon-edit\" circle\r\n                    @click=\"change(scope)\"></el-button>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"查看详情\" v-if=\"isTeacher != 'teacher'\">\r\n            <template v-slot=\"scope\">\r\n                <el-button type=\"success\" icon=\"el-icon-search\" circle\r\n                    @click=\"detail(scope)\"></el-button>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"删除\" v-if=\"isTeacher != 'teacher'\">\r\n            <template v-slot=\"scope\">\r\n                <el-button type=\"danger\" icon=\"el-icon-delete\" circle\r\n                    @click=\"remove(scope.row.bbuyer_name_ch)\"></el-button>\r\n            </template>\r\n        </el-table-column>\r\n    </el-table>\r\n    <div class=\"footer\">\r\n        <el-pagination background layout=\"prev, pager, next\" :page-size=\"10\" :total=\"max\" @current-change=\"page($event)\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref, computed } from \"vue\";\r\nimport api from \"@/modules/api\";\r\nimport { useRouter } from \"vue-router\";\r\nlet isAdmin = localStorage.id == \"admin\";\r\nlet isTeacher = localStorage.id;\r\nlet router = useRouter();\r\nlet data = ref([]);\r\nlet max = ref(0);\r\nlet index = ref(0);\r\nlet tableData = computed(() =>\r\n    data.value.slice(0 + index.value * 10, 0 + (index.value + 1) * 10)\r\n);\r\n\r\nfunction page(page) {\r\n    index.value = page - 1;\r\n}\r\n\r\napi(`SELECT DISTINCT * FROM prod_bbuyer`).then((res) => {\r\n    data.value = res.res;\r\n    max.value = res.res.length;\r\n});\r\n\r\nfunction change(data) {\r\n    if (localStorage.id == \"admin\") {\r\n        router.push({ path: \"/updata-bbuyer\", query: { id: data.row.bbuyer_name_ch } });\r\n    }\r\n}\r\n\r\nfunction detail(data) {\r\n    if (localStorage.id == \"admin\") {\r\n        router.push({ path: \"/detail-bbuyer\", query: { id: data.row.bbuyer_name_ch } });\r\n    }\r\n}\r\n\r\nfunction upload() {\r\n    router.push({ path: \"/create-b_buyer\"});\r\n}\r\n\r\nfunction remove(id, index) {\r\n    api(`DELETE FROM prod_bbuyer WHERE bbuyer_name_ch='${id}';`).then((res) => {\r\n        router.go(0);\r\n    });\r\n}\r\nlet stuClass = ref(\"\");\r\nlet stuSource = ref(\"\");\r\n\r\nlet setSource = ref([\r\n    { label: \"是\" },\r\n    { label: \"否\" },\r\n]);\r\n\r\nfunction selectSub() {\r\n    api(`select * from prod_bbuyer where subject='${stuClass.value}';`).then((res) => {\r\n        data.value = res.res;\r\n    });\r\n}\r\n\r\nlet compName = ref(\"\");\r\nfunction search() {\r\n    let sql = `SELECT * FROM prod_bbuyer\r\n    WHERE bbuyer_name_ch LIKE '%${compName.value}%'\r\n    OR bbuyer_name_en LIKE '%${compName.value}%';`;\r\n    api(sql).then((res) => {\r\n        data.value = res.res;\r\n    });\r\n}\r\n\r\n</script>\r\n<style scoped lang='scss'>\r\n.el-select {\r\n    margin-top: 20px;\r\n    margin-left: 30px;\r\n}\r\n\r\n.footer {\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    margin-bottom: 30px;\r\n}\r\n\r\n.company_name {\r\n    width: 200px;\r\n    margin-left: 20px;\r\n}\r\n\r\n.search-btn {\r\n    margin-left: 10px;\r\n}</style>"]}]}