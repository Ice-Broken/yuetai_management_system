{"remainingRequest":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\buyer\\teacher-chengji.vue?vue&type=style&index=0&id=0e465fe7&scoped=true&lang=scss","dependencies":[{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\buyer\\teacher-chengji.vue","mtime":1689059129214},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1688620975306},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1688620975546},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1688620975454},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1688620980165},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1688620971327},{"path":"C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1688620975546}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jaGVuZ2ppLWhlYWRlciB7CiAgaGVpZ2h0OiA3MHB4Owp9CgoubG9nIHsKICBmbG9hdDogcmlnaHQ7CiAgbWFyZ2luLXJpZ2h0OiAzMHB4OwogIG1hcmdpbi10b3A6IDIwcHg7Cn0KCi5jYXJkLWhlYWRlciB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLnRleHQgewogIGZvbnQtc2l6ZTogMTRweDsKfQoKLml0ZW0gewogIG1hcmdpbi1ib3R0b206IDE4cHg7Cn0KCi5ib3gtY2FyZCB7CiAgd2lkdGg6IDQ4MHB4OwogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDEwMHB4OwogIGxlZnQ6IGNhbGMoKDEwMHZ3IC0gNDgwcHgpIC8gMik7Cn0KCi5zb3J0IHsKICBmbG9hdDogbGVmdDsKICBtYXJnaW4tdG9wOiAyMHB4OwogIG1hcmdpbi1sZWZ0OiAyMHB4Owp9Cgouc2hlbnFpbmcgewogIHBvc2l0aW9uOiBmaXhlZDsKICBib3R0b206IDgwcHg7CiAgcmlnaHQ6IDUwcHg7Cn0KCi5hbGVydCB7CiAgd2lkdGg6IDEwMHZ3OwogIGhlaWdodDogMTAwdmg7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMHB4OwogIGxlZnQ6IDBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7CgogIC5ib3ggewogICAgd2lkdGg6IDMwMHB4OwogICAgaGVpZ2h0OiAyNTBweDsKICAgIGJhY2tncm91bmQ6IHJnYigyNDgsIDI0OCwgMjQ4KTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICBtYXJnaW46IDBweCBhdXRvOwogICAgbWFyZ2luLXRvcDogMTAwcHg7CiAgfQoKICAuZWwtaW5wdXQgewogICAgd2lkdGg6IDIwMHB4OwogICAgbWFyZ2luLXRvcDogMzBweDsKICB9CgogIC5lbC1kYXRlLXBpY2tlciB7CiAgICBtYXJnaW4tdG9wOiAyMHB4OwogIH0KCiAgLmVsLWJ1dHRvbiB7CiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogICAgd2lkdGg6IDIwMHB4OwogICAgbWFyZ2luOiAwcHggYXV0bzsKICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgfQp9Cg=="},{"version":3,"sources":["C:\\Users\\Rick\\Desktop\\yuetai_management_system\\frontend\\src\\views\\buyer\\teacher-chengji.vue"],"names":[],"mappings":"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","file":"C:/Users/Rick/Desktop/yuetai_management_system/frontend/src/views/buyer/teacher-chengji.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"chengji-header\">\n    <el-select v-model=\"stuClass\" placeholder=\"请选择\" style=\"margin-top: 20px; margin-left: 30px; float: left\"\n      @change=\"classSelect\">\n      <el-option v-for=\"item in setClass\" :key=\"item.label\" :label=\"item.label\" :value=\"item.label\">\n      </el-option>\n    </el-select>\n    <el-button type=\"primary\" class=\"sort\" @click=\"setSort\">\n      成绩排序\n      <i class=\"el-icon-arrow-up\" v-show=\"isSort != 'true' && isSort\"></i>\n      <i class=\"el-icon-arrow-down\" v-show=\"isSort != 'true' && !isSort\"></i>\n    </el-button>\n    <el-button @click=\"log\" type=\"primary\" class=\"log\">打印成绩</el-button>\n    <el-button type=\"primary\" class=\"log\" @click=\"isEchart\">成绩分析</el-button>\n    <div class=\"log\">\n      <input type=\"file\" ref=\"file\" id=\"file\" style=\"display: none\" accept=\".xlsx\" @change=\"load\" />\n      <label for=\"file\" class=\"el-button el-button--primary\">\n        <i class=\"el-icon-upload\"></i>\n        上传文件\n      </label>\n    </div>\n  </div>\n\n  <el-table :data=\"tableData\" style=\"width: 100%\">\n    <el-table-column prop=\"stucode\" label=\"学号\" width=\"180\"> </el-table-column>\n    <el-table-column prop=\"name\" label=\"姓名\" width=\"180\"> </el-table-column>\n    <el-table-column :label=\"label\">\n      <template v-slot=\"scope\">\n        <el-button :disabled=\"isDisabled\" @click=\"setNum(scope)\">\n          {{ scope.row.score || \"未输入\" }}\n        </el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n  <el-card class=\"box-card\" v-show=\"excelShow\">\n    <template #header>\n      <div class=\"card-header\">\n        <span>点击下载Excel</span>\n        <el-button class=\"button\" type=\"text\" @click=\"excelShow = false\">关闭</el-button>\n      </div>\n    </template>\n    <div class=\"text item\">\n      <a :href=\"excel\" download=\"excel\" target=\"_blank\">点击下载</a>\n    </div>\n  </el-card>\n  <echarts v-model:isShow=\"isShow\" :option=\"option\" v-if=\"isShow\"></echarts>\n  <el-button type=\"primary\" round class=\"shenqing\" @click=\"showApply = true\">申请开放</el-button>\n  <div class=\"alert\" v-show=\"showApply\" @click=\"showApply = false\">\n    <div class=\"box\" @click.stop=\"\">\n      <el-date-picker v-model=\"time\" type=\"date\" placeholder=\"选择日期\">\n      </el-date-picker>\n      <el-input placeholder=\"输入说明\" v-model=\"mes\" clearable> </el-input>\n      <el-button type=\"primary\" @click=\"apply\">申请</el-button>\n    </div>\n  </div>\n\n  <!-- 修改成绩弹窗 -->\n  <el-dialog v-model=\"dialogVisible\" :title=\"`修改学号为: ${showDataOption.user_id} 的学生${label}？`\" :before-close=\"beforClose\">\n    <table>\n      <tr>\n        <td></td>\n        <td>占比</td>\n        <td>分数</td>\n      </tr>\n      <tr>\n        <td>平时成绩</td>\n        <td>\n          <el-input-number v-model=\"showDataOption.cumulative\" :min=\"0\" :max=\"100\" @change=\"(value) => {\n              showDataOption.end = 100 - value;\n            }\n            \" />\n        </td>\n        <td>\n          <el-input-number v-model=\"showDataOption.cumulative_count\" :min=\"0\" :max=\"100\" />\n        </td>\n      </tr>\n      <tr>\n        <td>期末成绩</td>\n        <td>\n          <el-input-number v-model=\"showDataOption.end\" :min=\"0\" :max=\"100\" @change=\"(value) => {\n              showDataOption.cumulative = 100 - value;\n            }\n            \" />\n        </td>\n        <td>\n          <el-input-number v-model=\"showDataOption.end_count\" :min=\"0\" :max=\"100\" />\n        </td>\n      </tr>\n    </table>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">关闭</el-button>\n        <el-button type=\"primary\" @click=\"setChengji\">确认录入</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n<script setup>\nimport { ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { ElMessage } from \"element-plus\";\nimport api from \"@/modules/api\";\nimport readUser from \"@/modules/common/read-user\";\nimport updataScore from \"@/modules/common/updata-score\";\nimport teacherPrint from \"@/modules/teacher/teacher-print\";\nimport echarts from \"@/components/echarts\";\nimport { v4 } from \"uuid\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\n\nlet store = useStore();\nlet router = useRouter();\nlet isDisabled = ref(true);\napi(`select * from time where id='settime';`).then((res) => {\n  let times = res.res[0];\n  let start = +times.start;\n  let end = +times.end;\n  let time = new Date().getTime();\n  if (time > start && time < end) {\n    isDisabled.value = false;\n  }\n});\nlet isShow = ref(false); //是否显示表格弹窗\n\nlet tableData = ref(\"\");\nlet allData;\nlet subject = ref(\"\");\nlet label = ref(\"\");\nreadUser({ col: \"teacher\", id: localStorage.teacher }).then((res) => {\n  label.value = res.res[0].subject + \"成绩\";\n  switch (res.res[0].subject) {\n    case \"创新与实践\":\n      subject.value = \"innovate\";\n      break;\n    case \"马克思主义思想\":\n      subject.value = \"marx\";\n      break;\n    case \"高等数学\":\n      subject.value = \"math\";\n      break;\n    case \"VUE.js\":\n      subject.value = \"vue\";\n      break;\n    case \"Node.js\":\n      subject.value = \"node\";\n      break;\n    case \"MySQL数据库\":\n      subject.value = \"mysql\";\n      break;\n  }\n  api(`select * from achievement`).then((res) => {\n    tableData.value = res.res;\n    allData = res.res;\n    // 将授课科目的成绩单独处理为score\n    tableData.value.forEach((el, i) => {\n      tableData.value[i].score = tableData.value[i][subject.value];\n    });\n  });\n});\n\nlet stuClass = ref(\"\");\nlet setClass = ref([\n  {\n    label: \"软件工程1班\",\n  },\n  {\n    label: \"软件工程2班\",\n  },\n  {\n    label: \"软件工程3班\",\n  },\n  {\n    label: \"软件工程4班\",\n  },\n  {\n    label: \"软件工程5班\",\n  },\n  {\n    label: \"软件工程6班\",\n  },\n]);\n// 查询对应班级的学生的学号，将成绩总数据的表进行遍历，如果学号对得上，说明是这个班级的，就push到tableData里面\nfunction classSelect() {\n  api(`select * from student where class='${stuClass.value}';`).then((res) => {\n    let isClass = [];\n    res.res.forEach((item, i) => {\n      isClass.push(item.id);\n    });\n    tableData.value = [];\n    allData.forEach((item, i) => {\n      if (isClass.includes(item.stucode)) {\n        tableData.value.push(item);\n      }\n    });\n  });\n}\n// 获得焦点时候获取成绩存为变量，失去焦点时对比成绩是否有变化\nlet dialogVisible = ref(false);\nlet showDataOption = ref({\n  user_id: \"\",\n  //平时分、占比/期末分数、占比\n  cumulative: 40,\n  cumulative_count: 0,\n  end: 60,\n  end_count: 0,\n});\nconst beforClose = () => {\n  dialogVisible.value = false;\n  showDataOption.value = {\n    user_id: \"\",\n    cumulative: 40,\n    cumulative_count: 0,\n    end: 60,\n    end_count: 0,\n  };\n};\nfunction setNum(scope) {\n  showDataOption.value.user_id = scope.row.stucode;\n  dialogVisible.value = true;\n}\n\n// 文本框失去焦点之后设置成绩\nfunction setChengji() {\n  //   判断成绩是否修改\n  let id = showDataOption.value.user_id; //ID\n  let score = (\n    (showDataOption.value.cumulative_count / 100) *\n    showDataOption.value.cumulative +\n    (showDataOption.value.end_count / 100) * showDataOption.value.end\n  ).toFixed(0); //成绩计算\n  updataScore({ id: id, score: score, subject: subject.value }).then((res) => {\n    if (res.res) {\n      ElMessage({\n        message: `成功修改ID: ${id} 同学的${label.value}成绩为${score}`,\n        type: \"success\",\n        duration: 1000,\n      });\n      tableData.value.find((item) => item.stucode == id).score = score;\n    } else {\n      ElMessage({\n        message: \"修改失败\",\n        type: \"error\",\n      });\n    }\n    dialogVisible.value = false;\n  });\n}\n// 打印表格\nlet excel = ref(\"\");\nlet excelShow = ref(false);\nfunction log() {\n  let data = {\n    name: v4(),\n    data: [],\n  };\n  excel.value = store.state.excel + data.name + \".xlsx\";\n  data.data.push([\"姓名\", \"学号\", \"成绩\"]);\n  tableData.value.forEach((item, index) => {\n    data.data.push([\n      item.name,\n      item.stucode,\n      item.score == \"\" ? \"未录入\" : item.score,\n    ]);\n  });\n  teacherPrint({ data: data }).then((res) => {\n    excelShow.value = true;\n  });\n}\n// 生成表单\nlet option = ref({\n  title: {\n    text: \"成绩展示\",\n    left: \"center\",\n  },\n  color: [\"red\", \"green\", \"yellow\", \"blueviolet\", \"gray\"],\n\n  tooltip: {\n    trigger: \"item\",\n  },\n  legend: {\n    orient: \"vertical\",\n    left: \"left\",\n  },\n  series: [\n    {\n      name: \"访问来源\",\n      type: \"pie\",\n      radius: \"50%\",\n      data: [\n        { value: 0, name: \"不及格\" },\n        { value: 0, name: \"中等\" },\n        { value: 0, name: \"良好\" },\n        { value: 0, name: \"优秀\" },\n        { value: 0, name: \"未登记\" },\n      ],\n      emphasis: {\n        itemStyle: {\n          shadowBlur: 10,\n          shadowOffsetX: 0,\n          shadowColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n      },\n    },\n  ],\n});\nfunction isEchart() {\n  // 每次设置数量时候先清空\n  option.value.series[0].data.forEach((item, index) => {\n    item.value = 0;\n  });\n  // 设置标题\n  option.value.title.text = `${stuClass.value == \"\" ? \"全部同学的\" : stuClass.value\n    }${label.value}`;\n  // 遍历数组设置个数\n  tableData.value.forEach((item, index) => {\n    let i;\n    if (+item.score < 60 && item.score != \"\") {\n      i = 0;\n    } else if (+item.score > 60 && +item.score < 81) {\n      i = 1;\n    } else if (+item.score > 80 && +item.score < 90) {\n      i = 2;\n    } else if (+item.score > 89 && +item.score < 101) {\n      i = 3;\n    } else {\n      i = 4;\n    }\n    option.value.series[0].data[i].value++;\n  });\n  isShow.value = true;\n}\n\nlet isSort = ref(\"true\");\nfunction setSort() {\n  function compare(sort) {\n    return function (obj1, obj2) {\n      var value1 = +obj1[\"score\"];\n      var value2 = +obj2[\"score\"];\n      return sort ? value1 - value2 : value2 - value1; // 升序\n    };\n  }\n  var sortObj = tableData.value.sort(compare(isSort.value));\n  tableData.value = sortObj;\n  isSort.value = !!!isSort.value;\n}\n\nlet showApply = ref(false);\nlet time = ref(\"\");\nlet mes = ref(\"\");\nfunction apply() {\n  let now = new Date(time.value).getTime();\n  let sql = `INSERT INTO apply ( id, settime,mes,state,teacher,time )\n                       VALUES\n                       ( '${v4()}', '${now}','${mes.value}','待处理','${localStorage.teacher\n    }',NOW() );`;\n  api(sql).then((res) => {\n    showApply.value = false;\n  });\n}\n\nlet file = ref(null);\nfunction load() {\n  let from = new FormData();\n  from.append(subject.value, file.value.files[0]);\n  axios({\n    method: \"POST\",\n    url: \"/import\",\n    data: from,\n  }).then((res) => {\n    ElMessage.success(\"上传成功\");\n    router.go(0);\n  });\n}\n</script>\n<style scoped lang=\"scss\">\n.chengji-header {\n  height: 70px;\n}\n\n.log {\n  float: right;\n  margin-right: 30px;\n  margin-top: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.text {\n  font-size: 14px;\n}\n\n.item {\n  margin-bottom: 18px;\n}\n\n.box-card {\n  width: 480px;\n  position: fixed;\n  top: 100px;\n  left: calc((100vw - 480px) / 2);\n}\n\n.sort {\n  float: left;\n  margin-top: 20px;\n  margin-left: 20px;\n}\n\n.shenqing {\n  position: fixed;\n  bottom: 80px;\n  right: 50px;\n}\n\n.alert {\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  background-color: rgba(0, 0, 0, 0.3);\n\n  .box {\n    width: 300px;\n    height: 250px;\n    background: rgb(248, 248, 248);\n    text-align: center;\n    border-radius: 10px;\n    margin: 0px auto;\n    margin-top: 100px;\n  }\n\n  .el-input {\n    width: 200px;\n    margin-top: 30px;\n  }\n\n  .el-date-picker {\n    margin-top: 20px;\n  }\n\n  .el-button {\n    display: block !important;\n    width: 200px;\n    margin: 0px auto;\n    margin-top: 20px;\n  }\n}\n</style>\n"]}]}